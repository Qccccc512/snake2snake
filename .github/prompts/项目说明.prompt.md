---
mode: agent
---
## 当前任务目录结构：
```
hw1/
├── index.html           # 主HTML文件（必需）
├── styles.css           # 样式文件（必需）
├── main.js              # 主JS入口（必需）
└── src/                 # 源代码目录（必需）
    ├── config/
    │   └── GameConfig.js
    ├── constants/
    │   └── Directions.js
    ├── models/
    │   ├── Position.js
    │   ├── GameStats.js
    │   └── Achievement.js
    ├── entities/
    │   ├── Snake.js
    │   ├── SnakeEffect.js
    │   └── food/
    │       ├── Food.js
    │       ├── NormalFood.js
    │       ├── SpeedFood.js
    │       ├── SuperFood.js
    │       ├── MineFood.js
    │       └── MagnetFood.js
    ├── managers/
    │   ├── FoodFactory.js
    │   ├── FoodSpawner.js
    │   ├── CollisionDetector.js
    │   ├── ScoreManager.js
    │   ├── Timer.js
    │   ├── RespawnManager.js
    │   ├── UserManager.js
    │   └── AchievementSystem.js
    ├── ai/
    │   ├── PathFinder.js
    │   ├── AIController.js
    │   ├── EasyAI.js
    │   ├── NormalAI.js
    │   └── HardAI.js
    ├── core/
    │   ├── Game.js
    │   ├── User.js
    │   └── GameSession.js
    ├── rendering/
    │   ├── Renderer.js
    │   └── UIManager.js
    └── input/
        └── InputHandler.js
└── 报告/                 # 项目报告
    ├── 报告.txt
    ├── class_diagram.puml
    └── snake_usecase.puml
└── 文档/                 # 说明文档
    ├── ARCHITECTURE.md
    ├── PROJECT_OVERVIEW.md
    └── oop-snake-game.plan.md
```

## 任务目标：
@报告.txt是要实现的游戏系统的详细说明，@snake_usecase.puml 是该系统的usecase图，class.diagram.puml是该系统的类图。
当前已实现游戏的代码结构如上所示。主要为
index.html           # 主HTML文件（必需）
styles.css           # 样式文件（必需）
main.js              # 主JS入口（必需）
src/                 # 源代码目录（必需）

最终的任务目标是根据报告文档和uml图，用面向对象（OOP）方法实现完整、可运行、无bug的游戏。
当前任务进展：已实现完成了基本的游戏逻辑和功能。需要完善报告，uml图和代码实现的一致性，寻找并修复潜在的bug，优化代码结构和性能。



## 具体要求：
1. 仔细阅读@报告.txt，确保理解所有功能需求和设计要求。
2. 对照@snake_usecase.puml 和@class_diagram.puml，检查代码实现是否符合设计图，确保所有类和用例均已实现。
3. 根据报告中的OOP设计原则，检查代码结构，确保符合单一职责原则、开闭原则、依赖倒置原则等。
4. 检查代码中是否正确使用了设计模式，如单例模式、工厂模式、策略模式等。
5. 检查当前的代码实现是否合理，避免循环依赖，避免不同设置间的冲突，避免无效和冗余的代码。
6. 检查并修复任何其他可能影响游戏正常运行的bug，确保游戏能够顺利进行。
7. 根据当前的代码实现，完善报告文档和uml图，确保文档内容与实际代码一致。

## 限制条件：
在实现过程中，需要注意以下几点：
1. 确保代码结构清晰，模块化程度高，便于后期维护和扩展。
2. 遵循OOP原则，合理设计类之间的关系，避免出现循环依赖。
3. 充分利用设计模式，提高代码的复用性和可读性。
4. 提供必要的代码注释和文档说明，便于理解和使用。但如无不要，不写冗余的文档。

## 完成标准：
1. 所有核心功能模块均已实现，完成符合报告.txt要求的完整游戏。并经过充分检查，确保无bug。
2. 代码结构清晰，符合OOP设计原则，类之间关系合理，避免循环依赖。
3. 提供详细的代码注释和文档说明，便于后期维护和扩展。